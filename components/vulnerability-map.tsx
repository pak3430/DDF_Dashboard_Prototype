"use client"

import { useState } from "react"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { MapPin, Layers, Filter, Info } from "lucide-react"

const vulnerabilityData = [
  { id: 1, name: "강남구 역삼동", level: "높음", score: 0.85, population: 15420, accessibility: 0.32 },
  { id: 2, name: "서초구 방배동", level: "중간", score: 0.65, population: 12350, accessibility: 0.58 },
  { id: 3, name: "송파구 잠실동", level: "낮음", score: 0.35, population: 18900, accessibility: 0.78 },
  { id: 4, name: "강동구 천호동", level: "높음", score: 0.82, population: 11200, accessibility: 0.28 },
  { id: 5, name: "노원구 상계동", level: "중간", score: 0.68, population: 14800, accessibility: 0.52 },
]

export function VulnerabilityMap() {
  const [selectedTimeframe, setSelectedTimeframe] = useState("current")
  const [selectedLayer, setSelectedLayer] = useState("vulnerability")

  return (
    <div className="space-y-6">
      {/* Controls */}
      <div className="flex flex-wrap items-center gap-4">
        <div className="flex items-center gap-2">
          <Filter className="h-4 w-4 text-gray-500" />
          <Select value={selectedTimeframe} onValueChange={setSelectedTimeframe}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="current">현재</SelectItem>
              <SelectItem value="peak">첨두시간</SelectItem>
              <SelectItem value="offpeak">비첨두시간</SelectItem>
              <SelectItem value="weekend">주말</SelectItem>
            </SelectContent>
          </Select>
        </div>

        <div className="flex items-center gap-2">
          <Layers className="h-4 w-4 text-gray-500" />
          <Select value={selectedLayer} onValueChange={setSelectedLayer}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="vulnerability">취약도</SelectItem>
              <SelectItem value="accessibility">접근성</SelectItem>
              <SelectItem value="demand">수요밀도</SelectItem>
              <SelectItem value="coverage">서비스 커버리지</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* Map Placeholder */}
      <div className="relative">
        <div className="h-96 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center">
          <div className="text-center">
            <MapPin className="h-12 w-12 text-gray-400 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">MST-GCN 취약지 지도</h3>
            <p className="text-gray-600 mb-4">시공간 그래프 신경망 기반 취약지역 시각화</p>
            <Button variant="outline">지도 데이터 로드</Button>
          </div>
        </div>

        {/* Legend */}
        <div className="absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border">
          <h4 className="font-medium mb-3">취약도 범례</h4>
          <div className="space-y-2">
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-red-500 rounded"></div>
              <span className="text-sm">높음 (0.8-1.0)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-yellow-500 rounded"></div>
              <span className="text-sm">중간 (0.5-0.8)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-green-500 rounded"></div>
              <span className="text-sm">낮음 (0.0-0.5)</span>
            </div>
          </div>
        </div>
      </div>

      {/* Vulnerability List */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center gap-2">
            <Info className="h-5 w-5" />
            취약지역 상세 정보
          </CardTitle>
          <CardDescription>MST-GCN 모델이 식별한 대중교통 취약지역 목록</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {vulnerabilityData.map((area) => (
              <div key={area.id} className="flex items-center justify-between p-4 border rounded-lg">
                <div className="flex items-center gap-4">
                  <Badge
                    variant={area.level === "높음" ? "destructive" : area.level === "중간" ? "secondary" : "default"}
                  >
                    {area.level}
                  </Badge>
                  <div>
                    <h4 className="font-medium">{area.name}</h4>
                    <p className="text-sm text-gray-600">인구: {area.population.toLocaleString()}명</p>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-lg font-semibold">취약도 {area.score}</div>
                  <div className="text-sm text-gray-600">접근성 {area.accessibility}</div>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </div>
  )
}
